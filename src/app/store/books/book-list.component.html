

<div class="container filter">
  <div class='row'>
    <div>
      <form class="col-xs-6">
        <p>Filtered by: {{listFilter}} </p>
        <input class="form-control mr-sm-2" type="text" placeholder="Search" (input)="listFilter=$event.target.value"  >
      </form>
    </div>
  </div>
</div>
<div class="container">
  <div class='panel'>
    <div class='panel-body'>
      <div class='table-responsive'>
        <table class='table'
               *ngIf="books && books.length">
          <thead>
          <tr>
            <th>
              <button class='btn btn-primary'
                      (click)='toggleImage()'>
                {{showImage ? 'Hide' : 'Show'}} Image
              </button>
            </th>
            <th>Title</th>
            <th>Author</th>
            <th>Release Date</th>
            <th>InStock</th>
            <th>Price</th>
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor='let book of books | bookFilter:listFilter'>
            <td>
              <img *ngIf='showImage'
                   [src]='book.image'
                   [title]='book.title'
                   [style.width.px]='imageWidth'
                   [style.margin.px]='imageMargin'>
            </td>
            <td><a routerLink="{{book.id}}" routerLinkActive="active" >
              {{book.title}}
            </a></td>
            <td>{{ book.author | lowercase }}</td>
            <td>{{ book.date }}</td>
            <div *ngIf="book.inStock">
              <td><i class="glyphicon glyphicon-ok"></i></td><br>
            </div><div *ngIf="!book.inStock">
            <td><i class="glyphicon glyphicon-remove"></i></td><br>
          </div>
            <td>{{ book.price | currency:'USD':true:'1.2-2'}}</td>
            <td>
              <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" [attr.data-target]="'#edit' + book.id">Edit</button>
              <div [attr.id]="'edit'+book.id" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <h2>Edit: {{book.title}} </h2>
                          <div class="col-xs-3">
                            <label for="bookTitle">Title</label>
                            <input type="text" [value]="book.title" class="form-control" id="bookTitle"  (input)="book.title=$event.target.value">
                          </div>
                          <div class="col-xs-3">
                            <label for="bookPrice">Price</label>
                            <input type="number"  [value]="book.price" class="form-control" id="bookPrice" (input)="book.price=$event.target.value">
                          </div>
                          <div class="col-xs-3">
                            <label for="starRating">Stars</label>
                            <input type="text" [value]="book.starRating" class="form-control" id="starRating"  (input)="book.starRating=$event.target.value">
                          </div>
                          <div class="col-xs-3 btn-user">
                            <button class="btn btn-success btn-sm btn-smm" type="submit" (click)="editBook(book, $event)" data-dismiss="modal">Edit</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </td>
            <td>
              <button class="btn btn-danger btn-sm" (click)="deleteBook(book.id)">Delete</button>
            </td>

          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>


</div>
